---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import MetaBar from '../components/MetaBar.astro';
import ComicImage from '../components/ComicImage.astro';

export async function getStaticPaths() {
	const comics = await getCollection('comics');
	return comics.map((comic) => ({
		params: { slug: comic.id },
		props: { comic },
	}));
}

const { comic } = Astro.props;
const siteName = 'Le concept de la preuve';
const pageTitle = ` ${comic.id} - ${siteName}`;
---

<Layout
	title={pageTitle}
	image={{ src: comic.data.cover.src, width: comic.data.cover.width, height: comic.data.cover.height }}
	type="article"
	publishedDate={comic.data.date}
	currentSlug={comic.id}
>
	<article class="space-y-6">
		<div class="comic-grid grid grid-cols-1 md:grid-cols-2 border border-zinc-200 shadow-xl p-6 md:p-12">
			{comic.data.pages.map((page, i) => (
				<ComicImage
					src={page}
					alt={`${comic.data.alt} â€” page ${i + 1}`}
					eager
				/>
			))}
		</div>
		<MetaBar
			date={comic.data.date}
			slug={comic.id}
			title={comic.data.title}
		/>
	</article>
</Layout>
